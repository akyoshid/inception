# =============================================================================
# vsftpd Configuration for Inception Project
# =============================================================================

# -----------------------------------------------------------------------------
# Operation Mode Settings
# -----------------------------------------------------------------------------

listen=YES
# Start vsftpd in standalone mode
# YES: vsftpd listens on the port itself (suitable for Docker)
# NO: runs via inetd/xinetd (older method)

listen_ipv6=NO
# Wait for connections over IPv6?
# NO: Use IPv4 only (IPv4 is usually sufficient on Docker networks)
# Note: listen=YES and listen_ipv6=YES cannot be used at the same time

# -----------------------------------------------------------------------------
# Access Control
# -----------------------------------------------------------------------------

anonymous_enable=NO
# Allow login as an anonymous user (anonymous)?
# NO: Prohibited (required for security)
# YES: Anyone can log in (dangerous)

local_enable=YES
# Allow login with local users (Linux system users)
# YES: Users listed in /etc/passwd can log in
# NO: No one can log in

# -----------------------------------------------------------------------------
# Write permission
# -----------------------------------------------------------------------------

write_enable=YES
# Allow writing to files (upload, delete, rename, etc.)
# YES: Files can be uploaded via FTP
# NO: Read-only (download only)

local_umask=022
# Permission mask for uploaded files
# 022: New files become 755 (rwxr-xr-x)
# Calculation: 777 - 022 = 755
# If set to 077 it becomes 700 (rwx------) = only the owner can access

# -----------------------------------------------------------------------------
# chroot setup (important for security)
# -----------------------------------------------------------------------------

chroot_local_user=YES
# Confine users to their home directory
# YES: Users cannot move above their home directory
#      Example: cannot go above /var/www/html (cannot go to /var/www or /)
# NO: They can view the entire system (dangerous)

allow_writeable_chroot=YES
# Allow writable chroot?
# YES: It's okay if the chroot destination directory is writable
# NO: From vsftpd 2.3.5 onward, this will cause an error for security reasons
# Note: Write permissions are required to edit WordPress files

# -----------------------------------------------------------------------------
# Time Zone
# -----------------------------------------------------------------------------

use_localtime=YES
# Use local time for file timestamps?
# YES: Server's local time
# NO: UTC (Coordinated Universal Time)

# -----------------------------------------------------------------------------
# Log Settings
# -----------------------------------------------------------------------------

xferlog_enable=YES
# Record transfer logs
# YES: Record file uploads/downloads in the log

xferlog_std_format=NO
# Output logs in the standard xferlog format?
# YES: Standard wu-ftpd compatible format
# NO: Output in vsftpd format (to be used together with log_ftp_protocol)

log_ftp_protocol=YES
# Log all FTP protocol commands
# YES: Useful for debugging (shows every command)

vsftpd_log_file=/var/log/vsftpd.log
# Output logs to standard output â†’ can be checked with docker logs

# -----------------------------------------------------------------------------
# Passive Mode Settings (Docker required)
# -----------------------------------------------------------------------------

pasv_enable=YES
# Enable passive mode?
# YES: The client can initiate the data connection (Docker required)
# NO: Only active mode (does not work with Docker)

pasv_min_port=21100
pasv_max_port=21110
# Passive mode port range
# Randomly use ports in this range to listen for data connections
# A narrow range limits concurrent connections
# (11 ports = up to 11 simultaneous transfers)

pasv_address=127.0.0.1
# IP address to convey to clients in passive mode
# 127.0.0.1: for local testing
# In production, change to the actual server IP or domain name
# In Docker environments, usually specify the host machine's IP

# -----------------------------------------------------------------------------
# Security Settings
# -----------------------------------------------------------------------------

seccomp_sandbox=NO
# Use seccomp sandbox?
# NO: Must be disabled inside Docker containers
#     (the container itself is already sandboxed)
# YES: Additional syscall restrictions
#     (may cause issues inside Docker)
